<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Loading...</title>

<style>
  :root{
    --bg-dim: 0.58;
    --panel: rgba(10, 12, 16, 0.55);
    --panel-2: rgba(10, 12, 16, 0.38);
    --stroke: rgba(255,255,255,0.10);
    --stroke-2: rgba(255,255,255,0.14);
    --txt: rgba(255,255,255,0.92);
    --muted: rgba(255,255,255,0.72);
    --muted-2: rgba(255,255,255,0.55);
    --good: rgba(120, 255, 190, 0.95);
    --warn: rgba(255, 200, 120, 0.95);
    --bad: rgba(255, 120, 120, 0.95);
    --accent: rgba(170, 140, 255, 0.95);
    --shadow: 0 18px 60px rgba(0,0,0,0.55);
    --shadow-soft: 0 12px 35px rgba(0,0,0,0.35);
    --radius: 18px;
    --radius-sm: 12px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
  }

  html, body{
    width:100%;
    height:100%;
    margin:0;
    overflow:hidden;
    background:#000;
    color:var(--txt);
    font-family:var(--sans);
  }

  /* Background */
  #bg{
    position:fixed;
    inset:0;
    background:
      radial-gradient(60% 70% at 50% 40%, rgba(0,0,0,0.1), rgba(0,0,0,0.75)),
      url("The_Rower_2013.JPG") center/cover no-repeat;
    filter: brightness(var(--bg-dim));
    transform: scale(1.02);
  }

  /* Subtle film grain */
  #grain{
    position:fixed;
    inset:-40px;
    pointer-events:none;
    opacity:0.14;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
    animation: grain 7s steps(10) infinite;
    mix-blend-mode: overlay;
  }
  @keyframes grain{
    0% { transform: translate(0,0); }
    10%{ transform: translate(-2%, -3%); }
    20%{ transform: translate(-4%, 2%); }
    30%{ transform: translate(3%, -1%); }
    40%{ transform: translate(2%, 4%); }
    50%{ transform: translate(-3%, 2%); }
    60%{ transform: translate(4%, 0%); }
    70%{ transform: translate(0%, -4%); }
    80%{ transform: translate(-2%, 3%); }
    90%{ transform: translate(3%, 2%); }
    100%{ transform: translate(0,0); }
  }

  /* Vignette */
  #vignette{
    position:fixed;
    inset:0;
    pointer-events:none;
    background: radial-gradient(120% 90% at 50% 40%, rgba(0,0,0,0.05), rgba(0,0,0,0.78));
  }

  /* Floating bouncers layer (optional fun) */
  #bouncers{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:2;
    opacity:0.98;
  }
  .bouncer{
    position:absolute;
    width:72px;
    height:72px;
    border-radius:14px;
    object-fit:cover;
    box-shadow: 0 12px 30px rgba(0,0,0,0.45);
    border:1px solid rgba(255,255,255,0.12);
    user-select:none;
    transform: translate3d(0,0,0);
    filter: saturate(1.05) contrast(1.02);
  }

  /* Layout */
  #wrap{
    position:fixed;
    inset:0;
    display:grid;
    grid-template-rows: 1fr auto;
    z-index:3;
    animation: fadeIn 600ms ease-out;
  }

  /* Top HUD bar */
  #topbar{
    align-self:start;
    justify-self:stretch;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:18px 22px;
    gap:14px;
  }

  .pill{
    display:flex;
    align-items:center;
    gap:10px;
    padding:10px 12px;
    border-radius:999px;
    background: rgba(10, 12, 16, 0.40);
    border:1px solid var(--stroke);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .brand{
    display:flex;
    align-items:center;
    gap:12px;
    min-width: 260px;
  }
  .logo{
    width:38px; height:38px;
    border-radius:12px;
    background: linear-gradient(135deg, rgba(170,140,255,0.95), rgba(120,255,190,0.85));
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
    position:relative;
    overflow:hidden;
  }
  .logo:after{
    content:"";
    position:absolute;
    inset:-40%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
    transform: rotate(25deg);
    animation: sheen 2.8s ease-in-out infinite;
  }
  @keyframes sheen{
    0%{ transform: translateX(-60%) rotate(25deg); opacity:0; }
    25%{ opacity:1; }
    60%{ opacity:1; }
    100%{ transform: translateX(60%) rotate(25deg); opacity:0; }
  }

  .brandText{
    display:flex;
    flex-direction:column;
    line-height:1.1;
  }
  .serverName{
    font-weight:800;
    letter-spacing:0.6px;
    font-size:16px;
  }
  .serverTag{
    font-size:12px;
    color: var(--muted-2);
    font-family: var(--mono);
  }

  .stats{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:flex-end;
  }
  .stat{
    display:flex;
    align-items:center;
    gap:8px;
    padding:10px 12px;
    border-radius:999px;
    background: rgba(10, 12, 16, 0.40);
    border:1px solid var(--stroke);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  .dot{
    width:8px; height:8px; border-radius:999px;
    background: var(--good);
    box-shadow: 0 0 12px rgba(120,255,190,0.6);
  }
  .statLabel{
    font-size:12px;
    color: var(--muted-2);
    font-family: var(--mono);
  }
  .statValue{
    font-size:12px;
    font-family: var(--mono);
    color: var(--txt);
  }

  /* Center panel */
  #center{
    place-self:center;
    width:min(740px, calc(100% - 44px));
  }

  .panel{
    border-radius: var(--radius);
    background: linear-gradient(180deg, var(--panel), rgba(10,12,16,0.40));
    border:1px solid var(--stroke-2);
    box-shadow: var(--shadow);
    overflow:hidden;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .panelInner{
    padding:26px 26px 20px 26px;
  }

  .headline{
    display:flex;
    flex-direction:column;
    gap:10px;
    margin-bottom:18px;
  }

  .hTitle{
    font-size:44px;
    font-weight:900;
    letter-spacing:1.2px;
  }

  .subline{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    align-items:center;
    color: var(--muted);
    font-size:14px;
  }

  .chip{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:7px 10px;
    border-radius:999px;
    background: rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.10);
    font-family: var(--mono);
    font-size:12px;
    color: rgba(255,255,255,0.75);
  }
  .chip b{ color: rgba(255,255,255,0.92); font-weight:700; }

  /* Progress */
  .progressWrap{
    margin-top:14px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }

  .progressRow{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
  }

  #phase{
    font-family: var(--mono);
    font-size:13px;
    color: rgba(255,255,255,0.78);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  #percent{
    font-family: var(--mono);
    font-size:13px;
    color: rgba(255,255,255,0.78);
    min-width: 64px;
    text-align:right;
  }

  .bar{
    height:10px;
    border-radius:999px;
    background: rgba(255,255,255,0.10);
    border:1px solid rgba(255,255,255,0.08);
    overflow:hidden;
    position:relative;
  }

  .bar > span{
    display:block;
    height:100%;
    width: 15%;
    border-radius:999px;
    background: linear-gradient(90deg, rgba(170,140,255,0.95), rgba(120,255,190,0.85));
    box-shadow: 0 0 18px rgba(170,140,255,0.35);
    transition: width 300ms ease;
    position:relative;
  }

  .bar > span:after{
    content:"";
    position:absolute;
    top:-60%;
    bottom:-60%;
    width:180px;
    right:-90px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent);
    transform: rotate(15deg);
    animation: sweep 1.4s linear infinite;
    opacity:0.65;
  }

  @keyframes sweep{
    from{ transform: translateX(-160px) rotate(15deg); }
    to{ transform: translateX(160px) rotate(15deg); }
  }

  /* Tip + rules row */
  .grid2{
    margin-top:18px;
    display:grid;
    grid-template-columns: 1.15fr 0.85fr;
    gap:14px;
  }

  .card{
    border-radius: var(--radius-sm);
    background: rgba(255,255,255,0.05);
    border:1px solid rgba(255,255,255,0.10);
    padding:14px 14px;
  }

  .cardTitle{
    font-size:12px;
    font-family: var(--mono);
    color: rgba(255,255,255,0.70);
    letter-spacing:0.8px;
    text-transform: uppercase;
    margin-bottom:8px;
  }

  #tip{
    font-size:14px;
    color: rgba(255,255,255,0.86);
    line-height:1.35;
  }

  .rules{
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  .rule{
    display:flex;
    gap:10px;
    align-items:flex-start;
    font-size:13px;
    color: rgba(255,255,255,0.82);
    line-height:1.25;
  }

  .badge{
    margin-top:2px;
    width:18px;
    height:18px;
    border-radius:6px;
    background: rgba(255,255,255,0.10);
    border:1px solid rgba(255,255,255,0.12);
    display:flex;
    align-items:center;
    justify-content:center;
    font-family: var(--mono);
    font-size:11px;
    color: rgba(255,255,255,0.78);
    flex:0 0 auto;
  }

  /* Bottom bar */
  #bottombar{
    align-self:end;
    justify-self:stretch;
    padding: 18px 22px;
    display:flex;
    justify-content:space-between;
    gap:14px;
    flex-wrap:wrap;
  }

  .foot{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  .tiny{
    font-size:12px;
    color: rgba(255,255,255,0.58);
    font-family: var(--mono);
  }

  .kbd{
    padding:5px 8px;
    border-radius:10px;
    background: rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.10);
    color: rgba(255,255,255,0.78);
    font-family: var(--mono);
    font-size:12px;
  }

  /* Responsive */
  @media (max-width: 760px){
    .hTitle{ font-size: 36px; }
    .grid2{ grid-template-columns: 1fr; }
    .brand{ min-width: unset; }
  }

  @keyframes fadeIn{
    from{ opacity:0; transform: translateY(10px); }
    to{ opacity:1; transform: translateY(0); }
  }
</style>
</head>

<body>
  <div id="bg"></div>
  <div id="grain"></div>
  <div id="vignette"></div>
  <div id="bouncers"></div>

  <div id="wrap">
    <div id="topbar">
      <div class="pill brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="brandText">
          <div class="serverName" id="serverName">Steven's Universe</div>
          <div class="serverTag" id="serverTag">gm: sandbox • mode: round script</div>
        </div>
      </div>

      <div class="stats">
        <div class="stat"><span class="dot" id="dot"></span><span class="statLabel">STATUS</span><span class="statValue" id="statusTxt">BOOTING</span></div>
        <div class="stat"><span class="statLabel">MAP</span><span class="statValue" id="mapTxt">unknown</span></div>
        <div class="stat"><span class="statLabel">STEAMID</span><span class="statValue" id="steamTxt">—</span></div>
      </div>
    </div>

    <div id="center">
      <div class="panel">
        <div class="panelInner">
          <div class="headline">
            <div class="hTitle">Loading in…</div>
            <div class="subline">
              <span class="chip"><b>Tip:</b> keep voice low, footsteps loud.</span>
              <span class="chip"><b>Hint:</b> missing textures? wait for workshop to mount.</span>
              <span class="chip"><b>Rule:</b> friendly fire is a feature.</span>
            </div>
          </div>

          <div class="progressWrap">
            <div class="progressRow">
              <div id="phase">Starting…</div>
              <div id="percent">0%</div>
            </div>
            <div class="bar"><span id="barFill"></span></div>
          </div>

          <div class="grid2">
            <div class="card">
              <div class="cardTitle">Now Loading</div>
              <div id="tip">Preparing Steven's Clothes.</div>
            </div>

            <div class="card rules">
              <div class="cardTitle">Quick Rules</div>
              <div class="rule"><span class="badge">1</span><span>Being Suspicious Isn't a reason to RDM .. seamus.</span></div>
              <div class="rule"><span class="badge">2</span><span>Don't Drop the soap.</span></div>
              <div class="rule"><span class="badge">3</span><span>Make sure to RDM everyone.</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="bottombar">
      <div class="foot">
        <span class="tiny">Pro tip:</span>
        <span class="kbd">Q</span><span class="tiny">Gesture Menu</span>
        <span class="kbd">C</span><span class="tiny">context menu</span>
        <span class="kbd">Q</span><span class="tiny">spawn menu</span>
      </div>

      <div class="foot">
        <span class="tiny" id="clockTxt">—</span>
        <span class="tiny">•</span>
        <span class="tiny">Workshop-heavy server: first join may take longer.</span>
      </div>
    </div>
  </div>

<script>
(function(){
  // --------- Customise these ----------
  const SERVER_NAME = "Steven's Universe";
  const SERVER_TAG  = "gm: Z-City • mode: round script";
  const ENABLE_BOUNCERS = true; // set false if you want ultra-clean
  const BOUNCER_SIZE = 72;
  const BOUNCER_COUNT = 7;

  // Use images that exist in the same folder as this HTML (or change paths).
  const BOUNCER_IMAGES = [
    "ben.jpg",
    "dextr.jpg",
    "hd.jpg",
    "flight2.jpg",
    "semaschan.png",
    "seamus.jpg",
    "sh.png",
    "joe.png",
    "mrwest.jpg"
  ];

  // Funny / clean loading phases
  const PHASES = [
    { t: "Warming up Ben…", w: 10, status: "BOOTING" },
    { t: "Sitting in the corner chair…", w: 22, status: "MOUNTING" },
    { t: "Checking Harry Dempseys Allegations…", w: 18, status: "SYNCING" },
    { t: "Entering Chase…", w: 15, status: "CALIBRATING" },
    { t: "Fiddling Seamus…", w: 12, status: "FINALISING" },
    { t: "Almost ready. Ambatakum", w: 23, status: "READY" }
  ];

  const TIPS = [
    "If something looks purple, it’s missing a texture — usually Workshop still downloading.",
    "No sprint? You’re not slow — you’re *tactical*.",
    "Hold RMB + E To Loot Objects / Players.",
    "If you hear breathing behind you… don’t turn around. (Its Chase)",
    "First round: trust nobody. Second round: Fiddle Ben.",
    "Bind g fake in console to ragdoll",
    "If you join too early after a restart, some assets may not mount yet — wait 30 seconds and rejoin.",
    "Become prime King Von and keep shooting"
  ];

  // --------- Helper: grab query params (Steam passes stuff like steamid/map etc.) ----------
  function qs(name){
    try{
      const u = new URL(window.location.href);
      return u.searchParams.get(name) || "";
    }catch(e){
      // Old/quirky browser fallback
      const m = (window.location.search || "").match(new RegExp("[?&]" + name + "=([^&]+)"));
      return m ? decodeURIComponent(m[1]) : "";
    }
  }

  // --------- Set header text ----------
  const serverNameEl = document.getElementById("serverName");
  const serverTagEl  = document.getElementById("serverTag");
  serverNameEl.textContent = SERVER_NAME;
  serverTagEl.textContent  = SERVER_TAG;

  // Steam info (works if GMod passes it, otherwise shows —)
  const steamid = qs("steamid") || qs("steamID") || "";
  const map = qs("map") || qs("level") || "";

  document.getElementById("steamTxt").textContent = steamid ? steamid : "—";
  document.getElementById("mapTxt").textContent   = map ? map : "unknown";

  // --------- Clock ----------
  const clockEl = document.getElementById("clockTxt");
  function tickClock(){
    const d = new Date();
    const hh = String(d.getHours()).padStart(2,"0");
    const mm = String(d.getMinutes()).padStart(2,"0");
    clockEl.textContent = hh + ":" + mm;
    setTimeout(tickClock, 1000 * 10);
  }
  tickClock();

  // --------- Progress simulation (clean + believable) ----------
  const phaseEl = document.getElementById("phase");
  const percentEl = document.getElementById("percent");
  const barFill = document.getElementById("barFill");
  const statusTxt = document.getElementById("statusTxt");
  const dot = document.getElementById("dot");
  const tipEl = document.getElementById("tip");

  let phaseIndex = 0;
  let progress = 0;

  function setStatus(txt){
    statusTxt.textContent = txt;
    if (txt === "READY"){
      dot.style.background = "rgba(120,255,190,0.95)";
      dot.style.boxShadow = "0 0 12px rgba(120,255,190,0.6)";
    } else {
      dot.style.background = "rgba(255,200,120,0.95)";
      dot.style.boxShadow = "0 0 12px rgba(255,200,120,0.5)";
    }
  }

  function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

  // Rotate tips every few seconds
  function rotateTip(){
    tipEl.textContent = pick(TIPS);
    setTimeout(rotateTip, 4500);
  }
  rotateTip();

  // Step through phases with weighted contribution to total %
  const totalWeight = PHASES.reduce((a,p)=>a+p.w,0);

  function runPhases(){
    if (phaseIndex >= PHASES.length) {
      // Keep it feeling alive near the end
      phaseEl.textContent = "Final checks…";
      setStatus("READY");
      return;
    }

    const p = PHASES[phaseIndex];
    phaseEl.textContent = p.t;
    setStatus(p.status);

    // Advance progress smoothly for this phase
    const target = Math.min(99, progress + Math.round((p.w / totalWeight) * 100));
    const start = progress;

    const duration = 1200 + Math.random() * 1400; // 1.2–2.6s
    const startTime = Date.now();

    function step(){
      const t = (Date.now() - startTime) / duration;
      const eased = t < 1 ? (1 - Math.pow(1 - t, 3)) : 1; // easeOutCubic
      const val = Math.round(start + (target - start) * eased);

      progress = val;
      percentEl.textContent = val + "%";
      barFill.style.width = Math.max(8, val) + "%";

      if (t < 1) requestAnimationFrame(step);
      else {
        phaseIndex++;
        setTimeout(runPhases, 350 + Math.random() * 500);
      }
    }

    requestAnimationFrame(step);
  }

  // Start progress
  percentEl.textContent = "0%";
  barFill.style.width = "8%";
  setTimeout(runPhases, 350);

  // --------- Optional: bouncers (cleaner + lighter) ----------
  if (ENABLE_BOUNCERS) {
    const container = document.getElementById("bouncers");
    const SIZE = BOUNCER_SIZE;
    const COUNT = Math.min(BOUNCER_COUNT, BOUNCER_IMAGES.length);
    const SPEED_MIN = 0.85;
    const SPEED_MAX = 1.9;

    function rand(min, max){ return Math.random() * (max - min) + min; }

    // unique pick
    const unique = Array.from(new Set(BOUNCER_IMAGES));
    for (let i = unique.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [unique[i], unique[j]] = [unique[j], unique[i]];
    }
    const chosen = unique.slice(0, COUNT);

    const sprites = [];

    function makeSprite(src){
      const img = document.createElement("img");
      img.className = "bouncer";
      img.width = SIZE;
      img.height = SIZE;
      img.draggable = false;

      // Safer URL resolve (works better inside GMod's loading browser too)
      img.src = new URL(src, window.location.href).href;

      const w = window.innerWidth;
      const h = window.innerHeight;

      const s = {
        el: img,
        x: rand(0, Math.max(0, w - SIZE)),
        y: rand(0, Math.max(0, h - SIZE)),
        vx: (Math.random() < 0.5 ? -1 : 1) * rand(SPEED_MIN, SPEED_MAX),
        vy: (Math.random() < 0.5 ? -1 : 1) * rand(SPEED_MIN, SPEED_MAX)
      };

      img.style.transform = `translate3d(${s.x}px, ${s.y}px, 0)`;
      container.appendChild(img);
      return s;
    }

    for (const src of chosen) sprites.push(makeSprite(src));

    function tick(){
      const w = window.innerWidth;
      const h = window.innerHeight;

      for (const s of sprites){
        s.x += s.vx;
        s.y += s.vy;

        if (s.x <= 0){ s.x = 0; s.vx *= -1; }
        if (s.y <= 0){ s.y = 0; s.vy *= -1; }
        if (s.x >= w - SIZE){ s.x = w - SIZE; s.vx *= -1; }
        if (s.y >= h - SIZE){ s.y = h - SIZE; s.vy *= -1; }

        s.el.style.transform = `translate3d(${s.x}px, ${s.y}px, 0)`;
      }

      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  }
})();
</script>
</body>
</html>
